Defaulted container "osu" out of: osu, flux-view (init)
ðŸŸ§ï¸  wait-fs: 2025/09/29 06:16:46 wait-fs.go:40: /mnt/flux/flux-operator-done.txt
ðŸŸ§ï¸  wait-fs: 2025/09/29 06:16:46 wait-fs.go:49: Found existing path /mnt/flux/flux-operator-done.txt

Hello user root

ðŸŒŸï¸ Curve Certificate
curve.cert
#   ****  Generated on 2023-04-26 22:54:42 by CZMQ  ****
#   ZeroMQ CURVE **Secret** Certificate
#   DO NOT PROVIDE THIS FILE TO OTHER USERS nor change its permissions.
    
metadata
    name = "flux-cert-generator"
    keygen.hostname = "osu-0"
curve
    public-key = "-tL#5?tshQ68?S@iAzQ^kQhR:cL0ra34m&$La?dM"
    secret-key = ")hG?xIW#8o-[s@{6s$G]5cIk91xmH65o%hQl}Ki#"

ðŸ“¦ Resources
flux R encode --hosts=osu-[0-3] --local
{"version": 1, "execution": {"R_lite": [{"rank": "0-3", "children": {"core": "0-47"}}], "starttime": 0.0, "expiration": 0.0, "nodelist": ["osu-[0-3]"]}}
ðŸ‘‹ Hello, I'm osu-0
The main host is osu-0
The working directory is /, contents include:
bin		   entrypoint.sh  lib.usr-is-merged  proc		 srv
bin.usr-is-merged  etc		  lib64		     root		 sys
boot		   flux_operator  media		     run		 tmp
build		   home		  mnt		     sbin		 usr
dev		   lib		  opt		     sbin.usr-is-merged  var
ðŸš©ï¸ Flux Option Flags defined
Command provided is: /bin/bash /entrypoint.sh

ðŸŒ€ Launcher Mode: flux start -o --config /mnt/flux/view/etc/flux/config -Scron.directory=/etc/flux/system/cron.d   -Stbon.fanout=256   -Srundir=/mnt/flux/view/run/flux    -Sstatedir=/mnt/flux/view/var/lib/flux -Slocal-uri=local:///mnt/flux/view/run/flux/local -Stbon.connect_timeout=5s     -Slog-stderr-level=6    -Slog-stderr-mode=local  
broker.info[0]: start: none->join 0.389576ms
broker.info[0]: parent-none: join->init 0.009193ms
cron.info[0]: synchronizing cron tasks to event heartbeat.pulse
job-manager.info[0]: restart: 0 jobs
job-manager.info[0]: restart: 0 running jobs
job-manager.info[0]: restart: checkpoint.job-manager not found
broker.info[0]: rc1.0: running /etc/flux/rc1.d/01-sched-fluxion
sched-fluxion-resource.info[0]: version 0.45.0
sched-fluxion-resource.warning[0]: create_reader: allowlist unsupported
sched-fluxion-resource.info[0]: populate_resource_db: loaded resources from core's resource.acquire
sched-fluxion-qmanager.info[0]: version 0.45.0
broker.info[0]: rc1.0: running /etc/flux/rc1.d/02-cron
broker.info[0]: rc1.0: tab: cron-1 created: scheduled in 74593.289s at Tue Sep 30 03:00:00 2025
broker.info[0]: rc1.0: /etc/flux/rc1 Exited (rc=0) 0.3s
broker.info[0]: rc1-success: init->quorum 0.263923s
broker.info[0]: online: osu-0 (ranks 0)
broker.info[0]: online: osu-[0-3] (ranks 0-3)
broker.info[0]: quorum-full: quorum->run 1.22951s
# OSU MPI Latency Test v5.8
# Size          Latency (us)
== CALIPER: (0): Available services: aggregate,alloc,allocstats,async_event,cpuinfo,debug,event,io,kokkoslookup,kokkostime,loop_monitor,loop_statistics,memstat,mpi,mpiflush,mpireport,pthread,recorder,region_monitor,report,statistics,sysalloc,timer,timeseries,timestamp,trace,validator
== CALIPER: (0): Initialized
== CALIPER: (0): No manual config specified, disabling default channel
== CALIPER: (0): Creating channel builtin.configmgr
== CALIPER: (0): builtin.configmgr: mpiwrap: Using GOTCHA wrappers.
== CALIPER: (0): builtin.configmgr: Registered MPI service
== CALIPER: (0): builtin.configmgr: Registered mpiflush service
== CALIPER: (0): Creating channel event-trace
== CALIPER: (0): event-trace: registered async_event service
== CALIPER: (0): event-trace: event: Using region level 0
== CALIPER: (0): event-trace: event: Marked attribute comm.region
== CALIPER: (0): event-trace: event: Marked attribute loop
== CALIPER: (0): event-trace: event: Marked attribute phase
== CALIPER: (0): event-trace: event: Marked attribute region
== CALIPER: (0): event-trace: Registered event trigger service
== CALIPER: (0): event-trace: mpiwrap: Using GOTCHA wrappers.
== CALIPER: (0): event-trace: Registered MPI service
== CALIPER: (0): event-trace: Registered timer service
== CALIPER: (0): event-trace: Registered trace service
== CALIPER: (0): event-trace: event: Marked attribute mpi.function
== CALIPER: (0): Registered builtin ConfigManager
== CALIPER: (0): event-trace: event: Marked attribute msg_size
0                      52.95
1                      53.03
2                      53.05
4                      52.95
8                      53.23
16                     53.12
32                     53.09
64                     53.32
128                    53.25
256                    54.10
512                    54.49
1024                   54.65
2048                   68.98
4096                   71.54
8192                   73.00
16384                  73.76
32768                  80.73
65536                 202.65
131072                222.32
262144                247.62
524288                296.25
1048576               386.93
2097152               614.17
4194304              1087.17
== CALIPER: (0): builtin.configmgr: Flushing Caliper data
== CALIPER: (0): event-trace: Flushing Caliper data
== CALIPER: (0): event-trace: trace: Flushed 1278008 snapshots.
== CALIPER: (0): event-trace: Recorder: Wrote 1278154 records.
== CALIPER: (0): Finalizing ... 
== CALIPER: (0): builtin.configmgr: Flushing Caliper data
== CALIPER: (0): Releasing channel builtin.configmgr
== CALIPER: (0): builtin.configmgr: Finishing mpi service
== CALIPER: (0): builtin.configmgr channel blackboard: max 2 entries (0.195886% occupancy).
== CALIPER: (0): Releasing channel event-trace
== CALIPER: (0): event-trace: Finishing mpi service
== CALIPER: (0): event-trace: trace: 26 MiB reserved, 25.225 MiB used, 13 chunks.
== CALIPER: (0): event-trace: Trace: 1 thread trace buffers acquired, 0 retired, 0 released.
== CALIPER: (0): event-trace channel blackboard: max 1 entries (0.0979432% occupancy).
== CALIPER: (0): Releasing Caliper global data.
  Max active channels: 1
== CALIPER: (0): Process blackboard: max 2 entries (0.195886% occupancy).
== CALIPER: (0): Releasing Caliper thread data: 
  Metadata tree: 1 blocks, 217 nodes
   Metadata memory pool: 1 MiB reserved, 19.1455 KiB used
  Thread blackboard: max 4 entries (0.391773% occupancy).
== CALIPER: (0): Finished

START
cali-query -Gj /data/out.cali
cali-query: Error reading /data/out.cali: Cannot open file /data/out.cali
[

]
END

START
cali-query -T /data/out.cali
cali-query: Error reading /data/out.cali: Cannot open file /data/out.cali
Path 
END
rm: cannot remove '/data/out.cali': No such file or directory
OSU-ALLREDUCE

# OSU MPI Allreduce Latency Test v5.8
# Size       Avg Latency(us)
== CALIPER: (0): Available services: aggregate,alloc,allocstats,async_event,cpuinfo,debug,event,io,kokkoslookup,kokkostime,loop_monitor,loop_statistics,memstat,mpi,mpiflush,mpireport,pthread,recorder,region_monitor,report,statistics,sysalloc,timer,timeseries,timestamp,trace,validator
== CALIPER: (0): Initialized
== CALIPER: (0): No manual config specified, disabling default channel
== CALIPER: (0): Creating channel builtin.configmgr
== CALIPER: (0): builtin.configmgr: mpiwrap: Using GOTCHA wrappers.
== CALIPER: (0): builtin.configmgr: Registered MPI service
== CALIPER: (0): builtin.configmgr: Registered mpiflush service
== CALIPER: (0): Creating channel spot
== CALIPER: (0): spot: Registered aggregation service
== CALIPER: (0): spot: event: Using region level 0
== CALIPER: (0): spot: event: Marked attribute comm.region
== CALIPER: (0): spot: event: Marked attribute loop
== CALIPER: (0): spot: event: Marked attribute phase
== CALIPER: (0): spot: event: Marked attribute region
== CALIPER: (0): spot: Registered event trigger service
== CALIPER: (0): spot: mpiwrap: Using GOTCHA wrappers.
== CALIPER: (0): spot: Registered MPI service
== CALIPER: (0): spot: Registered timer service
== CALIPER: (0): spot: event: Marked attribute mpi.function
== CALIPER: (0): spot: Enabling MPI message tracing
== CALIPER: (0): Registered builtin ConfigManager
== CALIPER: (0): spot: event: Marked attribute msg_size
== CALIPER: (0): spot: event: Marked attribute num_procs
4                     250.63
8                     254.33
16                    279.27
32                    248.45
64                    243.40
128                   256.50
256                   257.61
512                   276.31
1024                  287.97
2048                  322.41
4096                  358.52
8192                  360.46
16384                 660.27
32768                 497.60
65536                 942.25
131072               1938.77
262144                820.54
524288               1077.75
1048576              1627.31
== CALIPER: (0): builtin.configmgr: Flushing Caliper data
== CALIPER: (0): spot: CustomOutputController::flush(): using MPI
== CALIPER: (0): OutputCommMpi: MPI is available
== CALIPER: (0): spot: Flushing Caliper data
== CALIPER: (0): spot: Aggregate: flushed 88 snapshots.
== CALIPER: (0): spot: Wrote 129 records.
== CALIPER: (0): Finalizing ... 
== CALIPER: (0): builtin.configmgr: Flushing Caliper data
== CALIPER: (0): Releasing channel builtin.configmgr
== CALIPER: (0): builtin.configmgr: Finishing mpi service
== CALIPER: (0): builtin.configmgr channel blackboard: max 2 entries (0.195886% occupancy).
== CALIPER: (0): CaliperMetadataDB: stored 225 nodes, 122 strings.
== CALIPER: (0): Releasing channel spot
== CALIPER: (0): spot: Aggregate: Releasing aggregation DB.
  max hash len: 3, 94 entries, 651 kernels, 1.5 MiB reserved.
== CALIPER: (0): spot: Finishing mpi service
== CALIPER: (0): spot channel blackboard: max 1 entries (0.0979432% occupancy).
== CALIPER: (0): Releasing Caliper global data.
  Max active channels: 1
== CALIPER: (0): Process blackboard: max 2 entries (0.195886% occupancy).
== CALIPER: (0): Releasing Caliper thread data: 
  Metadata tree: 2 blocks, 259 nodes
   Metadata memory pool: 1 MiB reserved, 38.123 KiB used
  Thread blackboard: max 4 entries (0.391773% occupancy).
== CALIPER: (0): Finished

START
cali-query -Gj /data/out.cali
[
{"cali.caliper.version":"2.13.0","cali.channel":"spot","mpi.world.size":"192","opts:mpi.message.count":"true","opts:mpi.message.size":"true","opts:node.order":"true","opts:output":"/data/out.cali","opts:profile.mpi":"true","opts:region.count":"true","opts:time.exclusive":"true","spot.channels":"regionprofile","spot.format.version":"2","spot.metrics":"min#inclusive#sum#time.duration,max#inclusive#sum#time.duration,avg#inclusive#sum#time.duration,sum#inclusive#sum#time.duration,avg#sum#mmc.send,max#sum#mmc.send,avg#sum#mmc.recv,max#sum#mmc.recv,max#sum#mmc.coll,min#min#mms.min,avg#avg#mms.avg,max#max#mms.avg,min#min#aggregate.slot,min#sum#rc.count,avg#sum#rc.count,max#sum#rc.count,sum#sum#rc.count,min#scale#sum#time.duration.ns,max#scale#sum#time.duration.ns,avg#scale#sum#time.duration.ns,sum#scale#sum#time.duration.ns","spot.options":"profile.mpi,mpi.message.count,mpi.message.size,node.order,region.count,time.exclusive","spot.timeseries.metrics":""}
]
END

START
cali-query -T /data/out.cali
Path            Min time/rank Max time/rank Avg time/rank Total time  Node order Min time/rank (exc) Max time/rank (exc) Avg time/rank (exc) Total time (exc) spot.channel  Calls/rank (min) Calls/rank (avg) Calls/rank (max) Calls (total) Collectives (max) Msg size (min) Msg size (avg) 
MPI_Comm_dup         0.007628      0.008013      0.007756    1.489160         87            0.007628            0.008013            0.007756         1.489160 regionprofile                1                1                1           192                                                 
MPI_Finalized        0.000003      0.000004      0.000003    0.000631         86            0.000003            0.000004            0.000003         0.000631 regionprofile                1                1                1           192                                                 
MPI_Initialized      0.000004      0.000005      0.000004    0.000778         85            0.000004            0.000005            0.000004         0.000778 regionprofile                1                1                1           192                                                 
MPI_Finalize         0.000007      0.000011      0.000008    0.001593         84            0.000007            0.000011            0.000008         0.001593 regionprofile                1                1                1           192                                                 
MPI_Allreduce        0.286506      0.837357      0.596152  114.461000         10            0.286506            0.837357            0.596152       114.461000 regionprofile             1350             1350             1350        259200              1350              8          19902 
MPI_Reduce           0.000280      0.011754      0.000757    0.145344          8            0.000280            0.011754            0.000757         0.145344 regionprofile               57               57               57         10944                57              0              7 
MPI_Barrier          3.166650      8.029710      5.557460 1067.030000          6            3.166650            8.029710            5.557460      1067.030000 regionprofile            15887            15887            15887       3050304             15887                               
allreduce_op         3.227430      7.541310      5.384760 1033.870000          1            0.204447            0.316585            0.223010        42.817800 regionprofile            43500            43500            43500       8352000                                                 
  MPI_Allreduce      3.015500      7.335630      5.161760  991.057000          4            3.015500            7.335630            5.161760       991.057000 regionprofile            14500            14500            14500       2784000             14500              4         110376 
END

# OSU MPI Allreduce Latency Test v5.8
# Size       Avg Latency(us)
== CALIPER: (0): Available services: aggregate,alloc,allocstats,async_event,cpuinfo,debug,event,io,kokkoslookup,kokkostime,loop_monitor,loop_statistics,memstat,mpi,mpiflush,mpireport,pthread,recorder,region_monitor,report,statistics,sysalloc,timer,timeseries,timestamp,trace,validator
== CALIPER: (0): Initialized
== CALIPER: (0): No manual config specified, disabling default channel
== CALIPER: (0): Creating channel builtin.configmgr
== CALIPER: (0): builtin.configmgr: mpiwrap: Using GOTCHA wrappers.
== CALIPER: (0): builtin.configmgr: Registered MPI service
== CALIPER: (0): builtin.configmgr: Registered mpiflush service
== CALIPER: (0): Creating channel event-trace
== CALIPER: (0): event-trace: registered async_event service
== CALIPER: (0): event-trace: event: Using region level 0
== CALIPER: (0): event-trace: event: Marked attribute comm.region
== CALIPER: (0): event-trace: event: Marked attribute loop
== CALIPER: (0): event-trace: event: Marked attribute phase
== CALIPER: (0): event-trace: event: Marked attribute region
== CALIPER: (0): event-trace: Registered event trigger service
== CALIPER: (0): event-trace: mpiwrap: Using GOTCHA wrappers.
== CALIPER: (0): event-trace: Registered MPI service
== CALIPER: (0): event-trace: Registered timer service
== CALIPER: (0): event-trace: Registered trace service
== CALIPER: (0): event-trace: event: Marked attribute mpi.function
== CALIPER: (0): Registered builtin ConfigManager
== CALIPER: (0): event-trace: event: Marked attribute msg_size
== CALIPER: (0): event-trace: event: Marked attribute num_procs
4                     276.72
8                     278.84
16                    270.20
32                    256.65
64                    239.41
128                   253.90
256                   250.41
512                   268.92
1024                  298.76
2048                  313.84
4096                  346.69
8192                  366.93
16384                 639.37
32768                 476.13
65536                 854.71
131072               1765.94
262144                731.22
524288               1088.30
1048576              1684.91
== CALIPER: (0): builtin.configmgr: Flushing Caliper data
== CALIPER: (0): event-trace: Flushing Caliper data
== CALIPER: (0): event-trace: trace: Flushed 150590 snapshots.
== CALIPER: (0): event-trace: Recorder: Wrote 150782 records.
== CALIPER: (0): Finalizing ... 
== CALIPER: (0): builtin.configmgr: Flushing Caliper data
== CALIPER: (0): Releasing channel builtin.configmgr
== CALIPER: (0): builtin.configmgr: Finishing mpi service
== CALIPER: (0): builtin.configmgr channel blackboard: max 2 entries (0.195886% occupancy).
== CALIPER: (0): Releasing channel event-trace
== CALIPER: (0): event-trace: Finishing mpi service
== CALIPER: (0): event-trace: trace: 4 MiB reserved, 2.92233 MiB used, 2 chunks.
== CALIPER: (0): event-trace: Trace: 1 thread trace buffers acquired, 0 retired, 0 released.
== CALIPER: (0): event-trace channel blackboard: max 1 entries (0.0979432% occupancy).
== CALIPER: (0): Releasing Caliper global data.
  Max active channels: 1
== CALIPER: (0): Process blackboard: max 2 entries (0.195886% occupancy).
== CALIPER: (0): Releasing Caliper thread data: 
  Metadata tree: 2 blocks, 267 nodes
   Metadata memory pool: 1 MiB reserved, 37.2568 KiB used
  Thread blackboard: max 4 entries (0.391773% occupancy).
== CALIPER: (0): Finished

START
cali-query -Gj /data/out.cali
cali-query: Error reading /data/out.cali: Cannot open file /data/out.cali
[

]
END

START
cali-query -T /data/out.cali
cali-query: Error reading /data/out.cali: Cannot open file /data/out.cali
Path 
END
broker.info[0]: rc2.0: /bin/bash /entrypoint.sh Exited (rc=0) 57.8s
broker.info[0]: rc2-success: run->cleanup 57.7855s
broker.info[0]: cleanup.0: flux queue stop --quiet --all --nocheckpoint Exited (rc=0) 0.1s
broker.info[0]: cleanup.1: flux resource acquire-mute Exited (rc=0) 0.1s
broker.info[0]: cleanup.2: flux cancel --user=all --quiet --states RUN Exited (rc=0) 0.1s
broker.info[0]: cleanup.3: flux queue idle --quiet Exited (rc=0) 0.1s
broker.info[0]: cleanup-success: cleanup->shutdown 0.317526s
broker.info[0]: children-complete: shutdown->finalize 48.0654ms
broker.info[0]: rc3.0: running /etc/flux/rc3.d/01-sched-fluxion
broker.info[0]: rc3.0: /etc/flux/rc3 Exited (rc=0) 0.1s
broker.info[0]: rc3-success: finalize->goodbye 83.1587ms
broker.info[0]: goodbye: goodbye->exit 0.023837ms
